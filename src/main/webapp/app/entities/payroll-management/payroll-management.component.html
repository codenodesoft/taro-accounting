<div class="row">
    <div class="col-md-12">
        <div class="card ">
            <div class="card-header text-white bg-secondary">Select</div>
            <div class="card-body">
                <form name="selectForm" role="form" novalidate>
                    <div class="row">
                        <div class="form-group col-md-3 form-inline">
                            <label  for="office" class="col-4 form-control-label" align="left">Office</label>
                            <select class="col-8 form-control" name="office" id="office" [(ngModel)]="payrollManagementService.payrollManagement.officeId" required>
                                <option [ngValue]="officeOption.id" *ngFor="let officeOption of officeList">{{officeOption.name}}</option>
                            </select>

                        </div>
                        <div class="form-group col-md-3 form-inline">
                            <label for="designation" class="col-4 form-control-label" align="left">Designation</label>
                            <select class="col-8 form-control" name="designation" id="designation" [(ngModel)]="payrollManagementService.payrollManagement.designationId" required>
                                <option [ngValue]="undefined">All</option>
                                <option [ngValue]="designationOption.id" *ngFor="let designationOption of designationList">{{designationOption.name}}</option>
                            </select>
                        </div>
                        <div class="form-group col-md-2 form-inline">
                            <label for="year" class="col-4 form-control-label" align="left">Year</label>
                            <input class="col-8 form-control" id="year" type="number" [ngModel]="year" value="{{year}}" required/>
                        </div>
                        <div class="form-group col-md-3 form-inline">
                            <label class="form-control-label" class="col-4" for="monthType">Month</label>
                            <select  class="col-8 form-control" name="month" [(ngModel)]="payrollManagementService.payrollManagement.monthType" id="monthType"  required>
                                <option value="JANUARY">JANUARY</option>
                                <option value="FEBRUARY">FEBRUARY</option>
                                <option value="MARCH">MARCH</option>
                                <option value="APRIL">APRIL</option>
                                <option value="MAY">MAY</option>
                                <option value="JUNE">JUNE</option>
                                <option value="JULY">JULY</option>
                                <option value="AUGUST">AUGUST</option>
                                <option value="SEPTEMBER">SEPTEMBER</option>
                                <option value="OCTOBER">OCTOBER</option>
                                <option value="NOVEMBER">NOVEMBER</option>
                                <option value="DECEMBER">DECEMBER</option>
                            </select>
                        </div>
                        <div class="form-group col-md-1">
                            <div class="btn btn-secondary" (click)="fetch()">Fetch</div>
                        </div>
                    </div>
                </form>

            </div>

        </div>
    </div>
    <br/>
<!--    <div class="col-md-3">
        <div class="card ">
            <div class="card-header text-white bg-secondary">Select</div>
            <div class="card-body">
                <form name="selectForm" role="form" novalidate>
                    <div class="form-group form-inline">
                        <label  for="office" class="col-4 form-control-label" align="left">Office</label>
                        <select class="col-8 form-control" name="office" id="office" [(ngModel)]="payrollManagementService.payrollManagement.officeId" required>
                            <option [ngValue]="officeOption.id" *ngFor="let officeOption of officeList">{{officeOption.name}}</option>
                        </select>

                    </div>
                    <div class="form-group form-inline">
                        <label for="designation" class="col-4 form-control-label" align="left">Designation</label>
                        <select class="col-8 form-control" name="designation" id="designation" [(ngModel)]="payrollManagementService.payrollManagement.designationId" required>
                            <option [ngValue]="undefined">All</option>
                            <option [ngValue]="designationOption.id" *ngFor="let designationOption of designationList">{{designationOption.name}}</option>
                        </select>
                    </div>
                    <div class="form-group form-inline">
                        <label for="year" class="col-4 form-control-label" align="left">Year</label>
                        <input class="col-8 form-control" id="year" type="number" [ngModel]="year" value="{{year}}" required/>
                    </div>
                    <div class="form-group form-inline">
                        <label class="form-control-label" class="col-4" for="monthType">Month</label>
                        <select  class="col-8 form-control" name="month" [(ngModel)]="payrollManagementService.payrollManagement.monthType" id="monthType"  required>
                            <option value="JANUARY">JANUARY</option>
                            <option value="FEBRUARY">FEBRUARY</option>
                            <option value="MARCH">MARCH</option>
                            <option value="APRIL">APRIL</option>
                            <option value="MAY">MAY</option>
                            <option value="JUNE">JUNE</option>
                            <option value="JULY">JULY</option>
                            <option value="AUGUST">AUGUST</option>
                            <option value="SEPTEMBER">SEPTEMBER</option>
                            <option value="OCTOBER">OCTOBER</option>
                            <option value="NOVEMBER">NOVEMBER</option>
                            <option value="DECEMBER">DECEMBER</option>
                        </select>
                    </div>
                </form>

            </div>
            <div class="card-footer" align="right">
                <button class="btn btn
            -secondary" (click)="fetch()">Fetch</button>
            </div>
        </div>
    </div>-->
    <div class="col-md-12">
        <div class="card" style="min-height: 350px;">
            <div class="card-header text-white bg-secondary">Employee List</div>
            <div class="card-body">
                <div class="row">
                    <div class="col-12" style="padding-bottom: 2px;">
                        <div class="alert alert-info">
                            Vouchers will be created only after MD's approval.
                        </div>
                    </div>

                    <div class="col-12" align="left">
                        <button class="btn btn-outline-info" (click)="generateVouchers()">Generate Vouchers</button>
                        <button class="btn btn-outline-primary" (click)="showGeneratedVouchers()">Payroll Vouchers</button>
                        <button class="btn btn-outline-secondary" (click)="downloadSalaryReport()">Salary Report</button>
                    </div>

                </div>

                <div class="row" *ngIf="payrollGenerated!=null">
                    <div class="col-12">
                        <jhi-alert></jhi-alert>
                    </div>

                    <div class="col-8" align="right" *ngIf="!payrollGenerated">
                        <button class="btn btn-secondary" (click)="generatePayroll()">Generate Payroll</button>
                    </div>
                    <div class="col-8" align="right" *ngIf="payrollGenerated">
                        <button class="btn btn-secondary" (click)="generatePayroll()">Generate Payroll Again!</button>
                    </div>
                    <div class="col-md-2" *ngIf="payrollGenerated">
                        <button class="btn btn-primary" (click)="approveAll()">Approve All</button>
                    </div>
                    <div class="col-md-2" *ngIf="payrollGenerated">
                        <button class="btn btn-danger" (click)="rejectAll()">Reject All</button>
                    </div>
                    <br/>
                </div>
                <div class="table-responsive" *ngIf="employees" style="padding-top: 2em;">
                    <table class="table table-striped table-bordered">
                        <thead>
                        <tr>
                            <th >Employee Id</th>
                            <th >Name</th>
                            <th>Basic</th>
                            <th>Net Payable</th>
                            <th>Payroll</th>
                            <th>View</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let employee of employees">
                            <td>{{employee.employeeId}}</td>
                            <td>{{employee.fullName}}</td>
                            <td>{{ monthlySalaryMapWithEmployeeId[employee.id]? monthlySalaryMapWithEmployeeId[employee.id].basic : ''}}</td>
                            <td>{{monthlySalaryMapWithEmployeeId[employee.id]? monthlySalaryMapWithEmployeeId[employee.id].payable : ''}}</td>

                            <td><button class="btn btn-secondary" (click)="generatePayrollEmployeeSpecific(employee.id, employee.fullName)">Generate</button></td>
                            <td> <button type="submit"
                                         [routerLink]="['/monthly-salary', monthlySalaryMapWithEmployeeId[employee.id].id, 'view' ]"
                                         class="btn btn-info btn-sm" *ngIf="monthlySalaryMapWithEmployeeId[employee.id]">
                                <fa-icon [icon]="'eye'" ></fa-icon>
                                <span class="d-none d-md-inline">View</span>
                            </button></td>
                            <th *ngIf="monthlySalaryMapWithEmployeeId[employee.id]!==undefined">{{monthlySalaryMapWithEmployeeId[employee.id].status?monthlySalaryMapWithEmployeeId[employee.id].status:''}}</th>
                            <th *ngIf="monthlySalaryMapWithEmployeeId[employee.id]===undefined"></th>
                            <th>
                                <div *ngIf="( monthlySalaryMapWithEmployeeId[employee.id]===undefined ||  !monthlySalaryMapWithEmployeeId[employee.id].status || monthlySalaryMapWithEmployeeId[employee.id].status=='MODIFICATION_REQUEST_BY_ACCOUNTS'|| monthlySalaryMapWithEmployeeId[employee.id].status=='MODIFICATION_REQUEST_BY_CFO' || monthlySalaryMapWithEmployeeId[employee.id].status=='MODIFICATION_REQUEST_BY_CFO') ">
                                    <button  class="btn btn-success" *jhiHasAnyAuthority="['ROLE_EMPLOYEE_MANAGEMENT']"  (click)="approvedByManager(monthlySalaryMapWithEmployeeId[employee.id])">Approve</button>
                                </div>
                                <div *ngIf="monthlySalaryMapWithEmployeeId[employee.id]!==undefined && monthlySalaryMapWithEmployeeId[employee.id].status=='APPROVED_BY_MANAGER'">
                                    <div class="btn-group flex-btn-group-container">
                                        <button  class="btn btn-success" *jhiHasAnyAuthority="['ROLE_ACCOUNTS']"  (click)="approvedByAccounts(monthlySalaryMapWithEmployeeId[employee.id])">Approve</button>
                                        <button  class="btn btn-primary" *jhiHasAnyAuthority="['ROLE_ACCOUNTS']"  (click)="modificationRequestByAccounts(monthlySalaryMapWithEmployeeId[employee.id])">Modification Request</button>
                                    </div>
                                </div>
                                <div *ngIf="monthlySalaryMapWithEmployeeId[employee.id]!==undefined && monthlySalaryMapWithEmployeeId[employee.id].status=='APPROVED_BY_ACCOUNTS'">
                                    <div class="btn-group flex-btn-group-container">
                                        <button  class="btn btn-success" *jhiHasAnyAuthority="['ROLE_CFO']"  (click)="approvedByCFO(monthlySalaryMapWithEmployeeId[employee.id])">Approve</button>
                                        <button  class="btn btn-primary" *jhiHasAnyAuthority="['ROLE_CFO']"  (click)="modificationRequestByCFO(monthlySalaryMapWithEmployeeId[employee.id])">Modification Request</button>
                                    </div>
                                </div>
                                <div *ngIf="monthlySalaryMapWithEmployeeId[employee.id]!==undefined && monthlySalaryMapWithEmployeeId[employee.id].status=='APPROVED_BY_CFO'">
                                    <div class="btn-group flex-btn-group-container">
                                        <button  class="btn btn-success" *jhiHasAnyAuthority="['ROLE_MD']"  (click)="approvedByMD(monthlySalaryMapWithEmployeeId[employee.id])">Approve</button>
                                        <button  class="btn btn-primary" *jhiHasAnyAuthority="['ROLE_MD']"  (click)="modificationRequestByMD(monthlySalaryMapWithEmployeeId[employee.id])">Modification Request</button>
                                    </div>
                                </div>
                            </th>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div *ngIf="employees && employees.length">
                    <div class="row justify-content-center">
                        <jhi-item-count [page]="page" [total]="totalItems" [itemsPerPage]="itemsPerPage"></jhi-item-count>
                    </div>
                    <div class="row justify-content-center">
                        <ngb-pagination [collectionSize]="totalItems" [(page)]="page" [pageSize]="itemsPerPage" [maxSize]="5" [rotate]="true" [boundaryLinks]="true" (pageChange)="loadPage(page)"></ngb-pagination>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

